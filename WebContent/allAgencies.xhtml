<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:head></h:head>
<f:view>
	<h:form>

		<h:outputStylesheet library="css" name="toggleablePanel.css" />
		<center>
			<h2>Агенции за организиране на събития</h2>
		</center>

		<p:dataGrid var="agency" value="#{agencyBean.agencyList}" columns="1"
			rows="5" paginator="true" paginatorPosition="bottom" lazy="false">
			<p:growl id="growl" showDetail="true" />
			<p:fieldset legend="${agency.tUser.name}" toggleable="true"
				toggleSpeed="500" style="width:600px">
				<p:ajax event="toggle" listener="#{fieldsetBean.handleToggle}"
					update="growl" />

				<br />
				<h:panelGrid columns="2" cellpadding="3" cellspacing="1">
					<p:commandLink action="agencyDetail.jsf?faces-redirect=true">
						<f:setPropertyActionListener target="#{agencyDetailBean.agency}"
							value="${agency}" />
						<p:graphicImage value="#{agencyBean.image}"
							alt="${agency.tUser.name}" width="200px" height="125px">
							<f:param name="agencyId" value="#{agency.tUser.id}" />
						</p:graphicImage>
					</p:commandLink>
					<h:panelGrid columns="2" cellpadding="3" cellspacing="1">
						<b>Име на агенция:</b>
						<h:outputText value="${agency.tUser.name}" />
						<b>Телефон за контакт:</b>
						<h:outputText value="${agency.tUser.phone}" />
						<b>Град: </b>
						<h:outputText value="${agency.city}" />
						<b>Адрес: </b>
						<h:outputText value="${agency.address}" />
						<b>Уеб сайт: </b>
						<h:outputLink value="#{agency.website}" target="_blank">#{agency.website}</h:outputLink>
					</h:panelGrid>

					<h:commandButton value="Детайли" action="agencyDetail">
						<f:setPropertyActionListener target="#{agencyDetailBean.agency}"
							value="${agency}" />
					</h:commandButton>
				</h:panelGrid>
				
				<h:outputText value="#{agencyBean.rating[agency]}"/> 
				
			</p:fieldset>
		</p:dataGrid>



	</h:form>
</f:view>
</html>
